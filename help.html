<!DOCTYPE html>
<html lang="zh-CN">

<head>
        <meta charset="UTF-8">
        <script>
                (function () {
                        try {
                                // 使用同步的 localStorage 获取主题设置，这比数据库快得多
                                const themeMode = localStorage.getItem('starchat-theme-mode');
                                const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

                                if (themeMode === 'dark' || (themeMode === 'auto' && systemPrefersDark)) {
                                        document.documentElement.classList.add('dark');
                                }
                                // 如果是 'light' 或者 localStorage 中没设置，则不做任何事，保持默认
                        } catch (e) {
                                // 捕获异常，以防 localStorage 被禁用
                        }
                })();
        </script>

        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">

        <link rel="manifest" href="./manifest.json">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="apple-mobile-web-app-title" content="星链小手机">
        <meta name="theme-color" content="#3b82f6" />
        <link rel="apple-touch-icon" href="./icons/icon-192x192.png">

        <title>帮助</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="https://unpkg.com/dexie/dist/dexie.js"></script>
        <link rel="stylesheet" href="sharedStyles.css">
        <script type="module" src="applyGlobalStyles.js" defer></script>
        
        <style>
                :root {
                        --theme-color: #3b82f6;
                        /* 浅色模式变量 */
                        --bg-color-light: #f8fafc;
                        --content-bg-color-light: #ffffff;
                        --text-color-primary-light: #1e293b;
                        --text-color-secondary-light: #64748b;
                        --border-color-light: #e2e8f0;
                        --hover-bg-color-light: #f1f5f9;
                        --accent-color-light: #f0f9ff;
                        /* 深色模式变量 */
                        --bg-color-dark: #0f172a;
                        --content-bg-color-dark: #1e293b;
                        --text-color-primary-dark: #f1f5f9;
                        --text-color-secondary-dark: #94a3b8;
                        --border-color-dark: #334155;
                        --hover-bg-color-dark: #334155;
                        --accent-color-dark: #0f172a;
                        
                        /* 新增设计变量 */
                        --gradient-primary: linear-gradient(135deg, var(--theme-color) 0%, #6366f1 100%);
                        --gradient-secondary: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
                        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
                        --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
                        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
                        --border-radius-sm: 0.375rem;
                        --border-radius-md: 0.5rem;
                        --border-radius-lg: 0.75rem;
                        --border-radius-xl: 1rem;
                }

                /* --- 1. 全局与布局优化 --- */
                body {
                        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
                        background: var(--gradient-secondary);
                        color: var(--text-color-primary-light);
                        line-height: 1.6;
                        -webkit-font-smoothing: antialiased;
                        -moz-osx-font-smoothing: grayscale;
                        scroll-behavior: smooth;
                }

                /* 添加全局动画 */
                * {
                        box-sizing: border-box;
                }

                /* 滚动条美化 */
                ::-webkit-scrollbar {
                        width: 8px;
                }

                ::-webkit-scrollbar-track {
                        background: var(--bg-color-light);
                }

                ::-webkit-scrollbar-thumb {
                        background: var(--theme-color);
                        border-radius: 4px;
                }

                ::-webkit-scrollbar-thumb:hover {
                        background: #2563eb;
                }

                html.dark ::-webkit-scrollbar-track {
                        background: var(--bg-color-dark);
                }

                html.dark ::-webkit-scrollbar-thumb {
                        background: #64748b;
                }

                html.dark ::-webkit-scrollbar-thumb:hover {
                        background: var(--theme-color);
                }

                html.dark body {
                        background: linear-gradient(135deg, var(--bg-color-dark) 0%, #1e293b 100%);
                        color: var(--text-color-primary-dark);
                }

                /* 改进的主内容区域 */
                main.main-content {
                        padding: 2rem 1rem 3rem;
                        max-width: 1200px;
                        margin: 0 auto;
                }

                /* 响应式间距 */
                main.main-content > * + * {
                        margin-top: 1.5rem;
                }

                @media (min-width: 768px) {
                        main.main-content {
                                padding: 2rem 2rem 4rem;
                        }
                        
                        main.main-content > * + * {
                                margin-top: 2rem;
                        }
                        
                        .feature-grid {
                                grid-template-columns: repeat(2, 1fr);
                        }
                }
                
                @media (min-width: 1024px) {
                        main.main-content {
                                padding: 2.5rem 3rem 4rem;
                                max-width: 1200px;
                                margin: 0 auto;
                        }
                        
                        main.main-content > * + * {
                                margin-top: 2.5rem;
                        }
                        
                        .feature-grid {
                                grid-template-columns: repeat(3, 1fr);
                        }
                        
                        .welcome-section {
                                padding: 3rem;
                        }
                }
                
                @media (min-width: 1280px) {
                        main.main-content {
                                padding: 3rem 4rem 5rem;
                        }
                        
                        .section-card-header {
                                padding: 2.5rem;
                        }
                }

                /* --- 2. 字体与排版优化 --- */
                /* 欢迎语和介绍文本的样式 */
                section.mb-4 h2 {
                        color: var(--text-color-primary-light);
                        /* 标题使用主色 */
                        font-weight: 700;
                        /* 加粗 */
                }

                html.dark section.mb-4 h2 {
                        color: var(--text-color-primary-dark);
                }

                /* 增加段落行高，提升可读性 */
                .details-content p,
                .details-content li {
                        line-height: 1.75;
                        color: var(--text-color-secondary-light);
                }

                html.dark .details-content p,
                html.dark .details-content li {
                        color: var(--text-color-secondary-dark);
                }

                /* 子标题加粗，层级更清晰 */
                .details-content h4 {
                        font-weight: 700;
                        margin-bottom: 0.5rem;
                        color: var(--text-color-primary-light);
                }

                html.dark .details-content h4 {
                        color: var(--text-color-primary-dark);
                }

                /* --- 3. 组件样式优化 --- */

                /* a. 高亮文本样式优化 (更现代) */
                .highlight {
                        background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(99, 102, 241, 0.15) 100%);
                        color: var(--theme-color);
                        padding: 0.25rem 0.6rem;
                        border-radius: var(--border-radius-md);
                        font-weight: 600;
                        font-size: 0.9em;
                        border: 1px solid rgba(59, 130, 246, 0.2);
                        display: inline-block;
                        transition: all 0.2s ease;
                        position: relative;
                        overflow: hidden;
                }

                .highlight::before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: -100%;
                        width: 100%;
                        height: 100%;
                        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
                        transition: left 0.5s;
                }

                .highlight:hover::before {
                        left: 100%;
                }

                .highlight:hover {
                        transform: translateY(-1px);
                        box-shadow: 0 4px 8px rgba(59, 130, 246, 0.2);
                }

                html.dark .highlight {
                        background: linear-gradient(135deg, rgba(96, 165, 250, 0.15) 0%, rgba(129, 140, 248, 0.2) 100%);
                        color: #93c5fd;
                        border-color: rgba(96, 165, 250, 0.3);
                }

                html.dark .highlight:hover {
                        box-shadow: 0 4px 8px rgba(96, 165, 250, 0.3);
                }

                /* b. 折叠面板(Accordion)样式优化 */
                details {
                        border: 1px solid var(--border-color-light);
                        border-radius: var(--border-radius-lg);
                        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                        background: var(--content-bg-color-light);
                        box-shadow: var(--shadow-sm);
                        overflow: hidden;
                }

                html.dark details {
                        border-color: var(--border-color-dark);
                        background: var(--content-bg-color-dark);
                        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.2);
                }

                details[open] {
                        border-color: var(--theme-color);
                        box-shadow: var(--shadow-md), 0 0 0 1px var(--theme-color);
                }

                html.dark details[open] {
                        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 0 0 1px var(--theme-color);
                }

                details>summary {
                        list-style: none;
                        cursor: pointer;
                        padding: 1.5rem;
                        background: var(--content-bg-color-light);
                        font-weight: 600;
                        font-size: 1.1rem;
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                        color: var(--text-color-primary-light);
                        position: relative;
                        border-bottom: 1px solid transparent;
                }

                details>summary::before {
                        content: '';
                        position: absolute;
                        left: 0;
                        top: 0;
                        bottom: 0;
                        width: 4px;
                        background: var(--theme-color);
                        transform: scaleY(0);
                        transition: transform 0.3s ease;
                        transform-origin: bottom;
                }

                details[open]>summary::before {
                        transform: scaleY(1);
                }

                html.dark details>summary {
                        background: var(--content-bg-color-dark);
                        color: var(--text-color-primary-dark);
                }

                details>summary:hover {
                        background: var(--hover-bg-color-light);
                        padding-left: 1.75rem;
                }

                html.dark details>summary:hover {
                        background: var(--hover-bg-color-dark);
                }

                details>summary::-webkit-details-marker {
                        display: none;
                }

                /* 现代化的箭头图标 */
                details>summary::after {
                        content: '';
                        width: 1.5rem;
                        height: 1.5rem;
                        background: var(--theme-color);
                        border-radius: 50%;
                        position: relative;
                        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                        flex-shrink: 0;
                }

                details>summary::after {
                        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2.5'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
                        background-repeat: no-repeat;
                        background-position: center;
                        background-size: 1rem;
                }

                details[open]>summary::after {
                        transform: rotate(180deg);
                        background-color: var(--theme-color);
                        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
                }

                details[open]>summary {
                        border-bottom: 1px solid var(--border-color-light);
                }

                html.dark details[open]>summary {
                        border-bottom-color: var(--border-color-dark);
                }

                .details-content {
                        padding: 2rem;
                        background: var(--accent-color-light);
                        color: var(--text-color-primary-light);
                        line-height: 1.7;
                }

                html.dark .details-content {
                        background: var(--accent-color-dark);
                        color: var(--text-color-primary-dark);
                }

                /* 改进内容区域的文本样式 */
                .details-content p {
                        margin-bottom: 1rem;
                }

                .details-content p:last-child {
                        margin-bottom: 0;
                }

                .details-content ul, .details-content ol {
                        margin: 1rem 0;
                        padding-left: 1.5rem;
                }

                .details-content li {
                        margin-bottom: 0.5rem;
                        line-height: 1.6;
                }

                /* c. 代码/文本框样式优化 (针对表情包批量导入) */
                #json-prompt-code {
                        background-color: #f3f4f6;
                        border: 1px solid var(--border-color-light);
                        color: var(--text-color-secondary-light);
                        font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
                }

                html.dark #json-prompt-code {
                        background-color: #1f2937;
                        /* content-bg-dark */
                        border-color: var(--border-color-dark);
                        color: var(--text-color-secondary-dark);
                }

                /* 链接样式 */
                a {
                        color: var(--theme-color);
                        text-decoration: none;
                        font-weight: 500;
                        position: relative;
                        transition: all 0.2s ease;
                        border-radius: var(--border-radius-sm);
                        padding: 0.1rem 0.2rem;
                }

                a:hover {
                        background: rgba(59, 130, 246, 0.1);
                        color: var(--theme-color);
                        transform: translateY(-1px);
                }

                a.underline {
                        border-bottom: 2px solid rgba(59, 130, 246, 0.3);
                        transition: border-color 0.2s ease;
                }

                a.underline:hover {
                        border-bottom-color: var(--theme-color);
                        background: transparent;
                        transform: none;
                }

                html.dark a:hover {
                        background: rgba(96, 165, 250, 0.15);
                        color: #93c5fd;
                }

                #json-prompt-code {
                        background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
                        border: 1px solid var(--border-color-light);
                        border-radius: var(--border-radius-md);
                        color: var(--text-color-secondary-light);
                        font-family: 'JetBrains Mono', 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
                        font-size: 0.85rem;
                        line-height: 1.6;
                        padding: 1.5rem;
                        position: relative;
                        overflow: hidden;
                }

                #json-prompt-code::before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 0;
                        right: 0;
                        height: 3px;
                        background: var(--gradient-primary);
                }

                html.dark #json-prompt-code {
                        background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
                        border-color: var(--border-color-dark);
                        color: var(--text-color-secondary-dark);
                }

                /* 复制按钮样式优化 */
                #copy-prompt-btn {
                        background: var(--theme-color);
                        color: white;
                        border: none;
                        border-radius: var(--border-radius-md);
                        padding: 0.5rem 1rem;
                        font-weight: 600;
                        font-size: 0.8rem;
                        transition: all 0.2s ease;
                        cursor: pointer;
                        position: relative;
                        overflow: hidden;
                }

                #copy-prompt-btn::before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: -100%;
                        width: 100%;
                        height: 100%;
                        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
                        transition: left 0.5s;
                }

                #copy-prompt-btn:hover::before {
                        left: 100%;
                }

                #copy-prompt-btn:hover {
                        background: var(--theme-color);
                        transform: translateY(-2px);
                        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
                }

                #copy-prompt-btn:active {
                        transform: translateY(0);
                        box-shadow: 0 2px 6px rgba(59, 130, 246, 0.3);
                }

                #prompt-accordion {
                        border: 1px solid var(--border-color-light);
                        border-radius: 0.5rem;
                        /* rounded-lg */
                        background-color: var(--content-bg-color-light);
                        transition: all 0.2s ease-in-out;
                }

                html.dark #prompt-accordion {
                        border-color: var(--border-color-dark);
                        background-color: var(--content-bg-color-dark);
                }

                #prompt-accordion>summary {
                        list-style: none;
                        cursor: pointer;
                        padding: 0.75rem 1rem;
                        font-weight: 500;
                        font-size: 0.875rem;
                        /* text-sm */
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                }

                #prompt-accordion>summary::-webkit-details-marker {
                        display: none;
                }

                #prompt-accordion>summary #copy-prompt-btn {
                        color: var(--text-color-secondary-light);
                        background-color: #e5e7eb;
                        /* gray-200 */
                }

                html.dark #prompt-accordion>summary #copy-prompt-btn {
                        color: var(--text-color-secondary-dark);
                        background-color: #374151;
                        /* gray-700 */
                }

                #prompt-accordion>summary #copy-prompt-btn:hover {
                        background-color: #d1d5db;
                        /* gray-300 */
                }

                html.dark #prompt-accordion>summary #copy-prompt-btn:hover {
                        background-color: #4b5563;
                        /* gray-600 */
                }

                /* 展开后的内容区域样式 */
                #prompt-accordion .details-content {
                        border: none;
                        /* 移除之前添加的左边框 */
                        margin: 0;
                        /* 移除外边距 */
                        padding: 1rem;
                        border-top: 1px solid var(--border-color-light);
                }

                html.dark #prompt-accordion .details-content {
                        border-top-color: var(--border-color-dark);
                }

                /* 让 pre 标签的背景透明，以融入父容器 */
                #prompt-accordion pre {
                        background-color: transparent !important;
                        border: none !important;
                }

                /* --- 4. 布局与间距微调 (新增) --- */

                /* 增加每个可折叠区域之间的垂直间距 */
                main.main-content>details {
                        margin-bottom: 1.5rem;
                        /* 24px, 之前是 1rem */
                }

                /* 显著增加大的内容版块（如“第三方服务”、“进阶功能”）之间的顶部间距 */
                section[id] {
                        margin-top: 2.5rem;
                        /* 40px */
                        padding-top: 2.5rem;
                        /* 40px */
                        border-top: 1px solid var(--border-color-light);
                }

                html.dark section[id] {
                        border-top-color: var(--border-color-dark);
                }

                /* 移除原有的边距，统一由上面的新规则控制 */
                #services-guide,
                #Advance-guide {
                        margin-top: 0;
                }

                .section-card {
                        border-radius: var(--border-radius-xl);
                        overflow: hidden;
                        border: 1px solid var(--border-color-light);
                        background: var(--content-bg-color-light);
                        box-shadow: var(--shadow-md);
                        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                        position: relative;
                }

                .section-card:hover {
                        box-shadow: var(--shadow-lg);
                        transform: translateY(-2px);
                }

                html.dark .section-card {
                        border-color: var(--border-color-dark);
                        background: var(--content-bg-color-dark);
                        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
                }

                html.dark .section-card:hover {
                        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
                }

                .section-card-header {
                        padding: 2rem;
                        background: var(--gradient-primary);
                        color: white;
                        position: relative;
                        overflow: hidden;
                }

                .section-card-header::before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 0;
                        right: 0;
                        bottom: 0;
                        background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
                        pointer-events: none;
                }

                .section-card-header h2 {
                        font-size: 1.5rem;
                        font-weight: 700;
                        margin: 0;
                        position: relative;
                        z-index: 1;
                }

                .section-card-header p {
                        margin: 0.75rem 0 0 0;
                        font-size: 0.95rem;
                        opacity: 0.9;
                        position: relative;
                        z-index: 1;
                }

                .section-card-content {
                        background-color: var(--content-bg-color-light);
                }

                html.dark .section-card-content {
                        background-color: var(--content-bg-color-dark);
                }

                /* 移除卡片内部 details 元素的独立样式，使其融入卡片 */
                .section-card-content details {
                        border: none;
                        border-radius: 0;
                        margin-bottom: 0;
                        border-top: 1px solid var(--border-color-light);
                }

                html.dark .section-card-content details {
                        border-top-color: var(--border-color-dark);
                }

                .section-card-content details:first-child {
                        border-top: none;
                        /* 第一个不需要顶部边框 */
                }

                /* 调整卡片内部 summary 的样式 */
                .section-card-content details>summary {
                        font-size: 1rem;
                        /* 调小一点字号 */
                        font-weight: 500;
                        border-radius: 0;
                }

                /* --- 6. 帮助文档UI颜色修复与最终润色 (新增) --- */

                /* 为“AI自主生活”内部的模块指定浅色模式下的背景 */
                .details-content .bg-gray-50 {
                        background-color: #f9fafb;
                        /* gray-50 */
                }

                html.dark .details-content .bg-gray-50 {
                        background-color: rgba(31, 41, 55, 0.5);
                        /* dark:bg-gray-800/50 */
                }

                /* 统一所有部分的标题栏h2字体大小和加粗 */
                .section-card-header h2 {
                        font-size: 1.125rem;
                        /* text-lg */
                        font-weight: 600;
                        /* semibold */
                }

                /* 优化“快速上手指南”的步骤文本样式 */
                #quick-start-guide .details-content p,
                #quick-start-guide .section-card-content p {
                        color: var(--text-color-primary-light);
                }

                html.dark #quick-start-guide .details-content p,
                html.dark #quick-start-guide .section-card-content p {
                        color: var(--text-color-primary-dark);
                }

                /* 新增：美化改进的样式 */
                .feature-grid {
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                        gap: 1.5rem;
                        margin-top: 1.5rem;
                }

                .feature-card {
                        background: white;
                        border-radius: 1rem;
                        padding: 1.5rem;
                        border: 1px solid #e5e7eb;
                        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                        position: relative;
                        overflow: hidden;
                }

                .feature-card::before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 0;
                        right: 0;
                        height: 4px;
                        background: linear-gradient(90deg, var(--theme-color), #6366f1);
                        opacity: 0;
                        transition: opacity 0.3s ease;
                }

                .feature-card:hover::before {
                        opacity: 1;
                }

                .feature-card:hover {
                        transform: translateY(-4px);
                        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
                        border-color: var(--theme-color);
                }

                html.dark .feature-card {
                        background: var(--content-bg-color-dark);
                        border-color: var(--border-color-dark);
                }

                html.dark .feature-card:hover {
                        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
                }

                .feature-icon {
                        width: 2rem;
                        height: 2rem;
                        border-radius: 0.5rem;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-bottom: 1rem;
                        transition: transform 0.3s ease;
                }

                .feature-card:hover .feature-icon {
                        transform: scale(1.1);
                }

                .info-badge {
                        display: inline-flex;
                        align-items: center;
                        gap: 0.5rem;
                        background: rgba(59, 130, 246, 0.1);
                        color: var(--theme-color);
                        padding: 0.75rem 1rem;
                        border-radius: 0.75rem;
                        font-size: 0.875rem;
                        font-weight: 500;
                        border: 1px solid rgba(59, 130, 246, 0.2);
                        margin: 1rem 0;
                }

                html.dark .info-badge {
                        background: rgba(96, 165, 250, 0.15);
                        color: #93c5fd;
                        border-color: rgba(96, 165, 250, 0.3);
                }

                .tag-container {
                        display: flex;
                        flex-wrap: wrap;
                        gap: 0.5rem;
                        margin-top: 0.75rem;
                }

                .tag {
                        display: inline-block;
                        padding: 0.25rem 0.75rem;
                        border-radius: 9999px;
                        font-size: 0.75rem;
                        font-weight: 500;
                        transition: all 0.2s ease;
                }

                .tag:hover {
                        transform: translateY(-1px);
                        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                }

                /* 不同颜色的标签 */
                .tag-blue { background: #dbeafe; color: #1e40af; }
                .tag-green { background: #dcfce7; color: #166534; }
                .tag-purple { background: #f3e8ff; color: #7c3aed; }
                .tag-pink { background: #fce7f3; color: #be185d; }
                .tag-yellow { background: #fef3c7; color: #d97706; }
                .tag-indigo { background: #e0e7ff; color: #4338ca; }

                html.dark .tag-blue { background: rgba(59, 130, 246, 0.2); color: #93c5fd; }
                html.dark .tag-green { background: rgba(34, 197, 94, 0.2); color: #86efac; }
                html.dark .tag-purple { background: rgba(168, 85, 247, 0.2); color: #c4b5fd; }
                html.dark .tag-pink { background: rgba(236, 72, 153, 0.2); color: #f9a8d4; }
                html.dark .tag-yellow { background: rgba(245, 158, 11, 0.2); color: #fcd34d; }
                html.dark .tag-indigo { background: rgba(99, 102, 241, 0.2); color: #a5b4fc; }

                /* 增强的标题样式 */
                .enhanced-title {
                        background: linear-gradient(135deg, var(--theme-color), #6366f1);
                        background-clip: text;
                        -webkit-background-clip: text;
                        -webkit-text-fill-color: transparent;
                        font-weight: 700;
                }

                /* 改进的高亮样式 */
                .enhanced-highlight {
                        background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(99, 102, 241, 0.1));
                        color: var(--theme-color);
                        padding: 0.125rem 0.5rem;
                        border-radius: 0.375rem;
                        font-weight: 600;
                        font-size: 0.875rem;
                        border: 1px solid rgba(59, 130, 246, 0.3);
                        display: inline-block;
                        transition: all 0.2s ease;
                        position: relative;
                }

                .enhanced-highlight:hover {
                        transform: translateY(-1px);
                        box-shadow: 0 4px 8px rgba(59, 130, 246, 0.2);
                }

                html.dark .enhanced-highlight {
                        background: linear-gradient(135deg, rgba(96, 165, 250, 0.2), rgba(129, 140, 248, 0.15));
                        color: #93c5fd;
                        border-color: rgba(96, 165, 250, 0.4);
                }
        </style>
</head>

<body class="bg-gray-100">
        <div class="w-full h-full mx-auto flex flex-col">
                <header class="app-header">
                        <div class="flex items-center justify-between relative">
                                <a href="index.html" class="header-btn p-1.5 -ml-1.5 rounded-full">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
                                                viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round"
                                                        d="M15 19l-7-7 7-7" />
                                        </svg>
                                </a>
                                <h1 class="text-base font-semibold text-gray-800">帮助</h1>
                                <button id="toggle-all-btn"
                                        class="bg-gradient-to-r from-blue-500 to-indigo-600 text-white text-sm font-semibold px-4 py-2.5 rounded-xl hover:from-blue-600 hover:to-indigo-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 whitespace-nowrap border border-blue-400/20 backdrop-blur-sm">
                                        <span class="flex items-center gap-2">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" />
                                                </svg>
                                                全部展开
                                        </span>
                                </button>
                        </div>
                </header>
                <main class="flex-grow main-content px-4 md:px-6 lg:px-8 space-y-6">
                        <!-- 欢迎介绍区域 -->
                        <div class="welcome-section bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-slate-800 dark:via-slate-700 dark:to-slate-800 rounded-2xl p-6 md:p-8 lg:p-10 mb-8 relative overflow-hidden shadow-xl">
                                <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-400/20 to-purple-400/20 rounded-full blur-2xl"></div>
                                <div class="absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-br from-indigo-400/20 to-blue-400/20 rounded-full blur-xl"></div>
                                <div class="relative z-10">
                                        <div class="flex flex-col md:flex-row items-center gap-6 mb-6">
                                                <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl">
                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                                                        </svg>
                                                </div>
                                                <div class="text-center md:text-left">
                                                        <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2">星链小手机</h1>
                                                        <p class="text-xl text-blue-600 dark:text-blue-400 font-semibold mb-2">帮助中心</p>
                                                        <p class="text-gray-600 dark:text-gray-300 max-w-md">欢迎使用星链小手机！这里有您需要的所有使用指南和技巧，让您快速掌握这个智能AI角色扮演平台。</p>
                                                </div>
                                        </div>
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                                                <div class="bg-white/70 dark:bg-slate-800/70 backdrop-blur-sm rounded-xl p-6 border border-white/30 dark:border-slate-600/30 hover:bg-white/80 dark:hover:bg-slate-800/80 transition-all duration-300 group">
                                                        <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300">
                                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                                                                </svg>
                                                        </div>
                                                        <h3 class="font-bold text-gray-900 dark:text-white text-lg mb-2">🚀 快速上手</h3>
                                                        <p class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed">从基础功能开始，通过简单易懂的步骤指引，快速掌握星链小手机的核心使用方法</p>
                                                </div>
                                                <div class="bg-white/70 dark:bg-slate-800/70 backdrop-blur-sm rounded-xl p-6 border border-white/30 dark:border-slate-600/30 hover:bg-white/80 dark:hover:bg-slate-800/80 transition-all duration-300 group">
                                                        <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300">
                                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                                                </svg>
                                                        </div>
                                                        <h3 class="font-bold text-gray-900 dark:text-white text-lg mb-2">⚙️ 高级配置</h3>
                                                        <p class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed">配置第三方服务和高级功能，解锁更多强大特性，打造专属的AI交互体验</p>
                                                </div>
                                                <div class="bg-white/70 dark:bg-slate-800/70 backdrop-blur-sm rounded-xl p-6 border border-white/30 dark:border-slate-600/30 hover:bg-white/80 dark:hover:bg-slate-800/80 transition-all duration-300 group">
                                                        <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300">
                                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                                                                </svg>
                                                        </div>
                                                        <h3 class="font-bold text-gray-900 dark:text-white text-lg mb-2">🔧 故障排除</h3>
                                                        <p class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed">遇到问题不用担心！这里有详细的常见问题解答和故障排除指南</p>
                                                </div>
                                        </div>
                                </div>
                        </div>
                        <section id="services-guide" class="section-card">
                                <div class="section-card-header">
                                        <div class="flex items-center gap-3 mb-3">
                                                <div class="w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center">
                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                                                        </svg>
                                                </div>
                                                <div>
                                                        <h2 class="text-2xl font-bold text-white mb-1">📱 基础功能介绍</h2>
                                                        <p class="text-white/90 text-sm">探索星链小手机的核心功能，从基础操作到高级特性</p>
                                                </div>
                                        </div>
                                        <div class="bg-white/10 rounded-lg p-3 mt-4">
                                                <p class="text-white/80 text-sm flex items-center gap-2">
                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                        </svg>
                                                        点击下方标题即可展开查看各项功能的详细介绍和使用指南
                                                </p>
                                        </div>
                                </div>
                                <div class="section-card-content">
                                        <details>
                                                <summary class="flex items-center gap-3">
                                                        <div class="w-8 h-8 bg-gradient-to-br from-gray-400 to-gray-600 rounded-lg flex items-center justify-center">
                                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z" />
                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v1H8V5z" />
                                                                </svg>
                                                        </div>
                                                        <span class="font-semibold">🏠 主屏幕 (Home)</span>
                                                </summary>
                                                <div class="details-content space-y-6">
                                                        <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border-l-4 border-blue-500">
                                                                <p class="text-gray-800 dark:text-gray-200 leading-relaxed">应用的主入口界面，采用类手机系统设计，展示当前时间和日期，底部Dock栏集成了所有核心应用的快捷入口。</p>
                                                        </div>
                                                        
                                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                                <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                                                                        <div class="flex items-center gap-3 mb-3">
                                                                                <div class="w-8 h-8 bg-gradient-to-br from-purple-400 to-purple-600 rounded-lg flex items-center justify-center">
                                                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                                                                        </svg>
                                                                                </div>
                                                                                <h4 class="font-semibold text-gray-800 dark:text-gray-200">壁纸系统</h4>
                                                                        </div>
                                                                        <p class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed">主屏幕的背景展示。您可以在 <a href="#personalization-help" class="text-blue-600 dark:text-blue-400 hover:underline font-medium">个性化设置</a> 中更换为图片、渐变或动态拓扑背景。</p>
                                                                </div>
                                                                
                                                                <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                                                                        <div class="flex items-center gap-3 mb-3">
                                                                                <div class="w-8 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg flex items-center justify-center">
                                                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                                                                                        </svg>
                                                                                </div>
                                                                                <h4 class="font-semibold text-gray-800 dark:text-gray-200">应用Dock栏</h4>
                                                                        </div>
                                                                        <p class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed">快速访问 <a href="#x-message-help" class="text-blue-600 dark:text-blue-400 hover:underline font-medium">弦镜</a>、<a href="#summary-help" class="text-blue-600 dark:text-blue-400 hover:underline font-medium">动态</a>、<a href="#album-help" class="text-blue-600 dark:text-blue-400 hover:underline font-medium">相册</a> 等核心应用的快捷入口。</p>
                                                                </div>
                                                        </div>
                                                </div>
                                        </details>

                                        <details id="x-message-help">
                                                <summary class="flex items-center gap-3">
                                                        <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center">
                                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                                                                </svg>
                                                        </div>
                                                        <span class="font-semibold">💬 弦镜 (聊天应用)</span>
                                                </summary>
                                                <div class="details-content space-y-6">
                                                        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800">
                                                                <div class="flex items-center gap-3 mb-4">
                                                                        <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center">
                                                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                                                                                </svg>
                                                                        </div>
                                                                        <div>
                                                                                <h3 class="text-lg font-bold text-gray-900 dark:text-white">应用核心功能</h3>
                                                                                <p class="text-sm text-gray-600 dark:text-gray-400">您与AI角色互动的主要平台</p>
                                                                        </div>
                                                                </div>
                                                                <p class="text-gray-800 dark:text-gray-200 leading-relaxed">弦镜是星链小手机的核心应用，集成了 <span class="font-semibold text-blue-600 dark:text-blue-400">聊天、联系人、动态和个人主页</span> 四大模块，提供了一个完整的AI社交生态系统。</p>
                                                        </div>
                                                        <details>
                                                                <summary class="bg-gray-50 dark:bg-gray-800 rounded-lg p-3 font-medium text-gray-800 dark:text-gray-200">
                                                                        📱 四大主界面详解
                                                                </summary>
                                                                <div class="details-content space-y-6">
                                                                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                                                                <div class="bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow duration-300">
                                                                                        <div class="flex items-center gap-3 mb-3">
                                                                                                <div class="w-8 h-8 bg-gradient-to-br from-green-400 to-green-600 rounded-lg flex items-center justify-center">
                                                                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                                                                                                        </svg>
                                                                                                </div>
                                                                                                <div>
                                                                                                        <h4 class="font-bold text-gray-800 dark:text-gray-200">💬 聊天列表</h4>
                                                                                                        <code class="text-xs text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">chat.html</code>
                                                                                                </div>
                                                                                        </div>
                                                                                        <p class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed">
                                                                                                显示您所有好友和群聊的列表，按最新消息时间排序。未读消息会有红点提示。点击头像可进入 <a href="#char-profile-help" class="text-blue-600 dark:text-blue-400 hover:underline font-medium">角色资料页</a>，点击其他位置进入 <a href="#chatroom-help" class="text-blue-600 dark:text-blue-400 hover:underline font-medium">聊天室</a>。
                                                                                        </p>
                                                                                </div>
                                                                                
                                                                                <div class="bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow duration-300">
                                                                                        <div class="flex items-center gap-3 mb-3">
                                                                                                <div class="w-8 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg flex items-center justify-center">
                                                                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                                                                                                        </svg>
                                                                                                </div>
                                                                                                <div>
                                                                                                        <h4 class="font-bold text-gray-800 dark:text-gray-200">📞 通讯录</h4>
                                                                                                        <code class="text-xs text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">contacts.html</code>
                                                                                                </div>
                                                                                        </div>
                                                                                        <p class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed">
                                                                                                管理您的所有AI好友和群聊。您可以 <span class="bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200 px-2 py-1 rounded text-xs font-medium">创建新角色</span>、<span class="bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 px-2 py-1 rounded text-xs font-medium">发起群聊</span>、查看好友分组、以及进入 <span class="bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200 px-2 py-1 rounded text-xs font-medium">角色资料页</span>。
                                                                                        </p>
                                                                                </div>
                                                                                
                                                                                <div class="bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow duration-300">
                                                                                        <div class="flex items-center gap-3 mb-3">
                                                                                                <div class="w-8 h-8 bg-gradient-to-br from-pink-400 to-pink-600 rounded-lg flex items-center justify-center">
                                                                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                                                                                                        </svg>
                                                                                                </div>
                                                                                                <div>
                                                                                                        <h4 class="font-bold text-gray-800 dark:text-gray-200">📷 动态</h4>
                                                                                                        <code class="text-xs text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">moments.html</code>
                                                                                                </div>
                                                                                        </div>
                                                                                        <p class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed">
                                                                                                类似朋友圈的社交功能，您和AI角色都可以在此发布图文动态，并进行点赞、评论等互动。AI角色也会根据其人设和经历，在后台独立发布动态。
                                                                                        </p>
                                                                                </div>
                                                                                
                                                                                <div class="bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow duration-300">
                                                                                        <div class="flex items-center gap-3 mb-3">
                                                                                                <div class="w-8 h-8 bg-gradient-to-br from-purple-400 to-purple-600 rounded-lg flex items-center justify-center">
                                                                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                                                                                        </svg>
                                                                                                </div>
                                                                                                <div>
                                                                                                        <h4 class="font-bold text-gray-800 dark:text-gray-200">👤 我</h4>
                                                                                                        <code class="text-xs text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">me.html</code>
                                                                                                </div>
                                                                                        </div>
                                                                                        <p class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed mb-3">
                                                                                                您的个人中心。在这里可以管理多个身份和所有个人数据：
                                                                                        </p>
                                                                                        <div class="flex flex-wrap gap-2">
                                                                                                <span class="bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 px-2 py-1 rounded text-xs font-medium">人格预设</span>
                                                                                                <span class="bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 px-2 py-1 rounded text-xs font-medium">收藏</span>
                                                                                                <span class="bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200 px-2 py-1 rounded text-xs font-medium">回忆</span>
                                                                                                <span class="bg-pink-100 dark:bg-pink-900/30 text-pink-800 dark:text-pink-200 px-2 py-1 rounded text-xs font-medium">关系图谱</span>
                                                                                                <span class="bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200 px-2 py-1 rounded text-xs font-medium">表情包</span>
                                                                                                <span class="bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-200 px-2 py-1 rounded text-xs font-medium">世界设定</span>
                                                                                        </div>
                                                                                </div>
                                                                        </div>
                                                                        
                                                                        <div class="mt-6 space-y-4">
                                                                                        <li><strong>人格预设
                                                                                                        (Persona)</strong>:
                                                                                                您可以创建多个“你”的身份。每个预设包含不同的头像、昵称、人设等。
                                                                                                <ul
                                                                                                        class="list-circle list-inside ml-4">
                                                                                                        <li><strong>默认人格</strong>:
                                                                                                                “默认人格”主要应用于<span
                                                                                                                        class="highlight">未分组的角色</span>、所有<span
                                                                                                                        class="highlight">未单独绑定人格的群聊</span>，以及决定“我”界面的主头像/昵称和发布动态时的默认身份。
                                                                                                        </li>
                                                                                                        <li><strong>关联分组/群聊</strong>:
                                                                                                                您可以将特定的人格预设应用到某些分组或群聊上。当您在这些关联的对话中发言时，AI会认为您正在扮演这个人格，从而做出更贴合情景的回应。例如，您可以创建一个“严厉上司”的人格并关联到“工作”分组。
                                                                                                        </li>
                                                                                                </ul>
                                                                                        </li>
                                                                                        <li>
                                                                                                <strong>收藏
                                                                                                        (Favorites)</strong>:
                                                                                                您可以将<span
                                                                                                        class="highlight">聊天中的重要消息</span>或<span
                                                                                                        class="highlight">动态区的精彩帖子</span>收藏起来，方便日后随时回顾。
                                                                                        </li>
                                                                                        <li>
                                                                                                <strong>回忆
                                                                                                        (Memories)</strong>:
                                                                                                您可以查看所有角色创建的日记/回忆，或者是与您定下的约定（倒计时）事件。未完成的倒计时会优先显示在顶部，其次是您收藏的回忆，其余条目则会按照从新到旧的顺序排序。
                                                                                                角色与您对话时会参考您与TA最近的三条回忆。
                                                                                        </li>
                                                                                        <li>
                                                                                                <strong>关系图谱 (Relation
                                                                                                        Map)</strong>:
                                                                                                将所有角色和您的不同人格预设之间的关系可视化。
                                                                                                <ul
                                                                                                        class="list-circle list-inside ml-4">
                                                                                                        <li><strong>连线与箭头</strong>:
                                                                                                                每条连线代表一个角色对另一个角色的看法，箭头指向被看待的一方。
                                                                                                        </li>
                                                                                                        <li><strong>颜色与粗细</strong>:
                                                                                                                线的颜色代表关系的性质（如恋人、朋友、对手等），粗细则代表好感度的强度。
                                                                                                        </li>
                                                                                                        <li><strong>双向关系</strong>:
                                                                                                                角色之间的关系不是单向的。角色A可能将角色B视为“朋友”，而角色B可能将角色A视为“对手”，这会通过两条不同颜色和粗细的弧线来表示。
                                                                                                        </li>
                                                                                                        <li><strong
                                                                                                                        class="highlight">聚焦查看</strong>:
                                                                                                                在图谱上单击任意角色或用户的头像，视图将自动缩放并高亮显示所有与该角色直接相关的关系，便于清晰查看。
                                                                                                        </li>
                                                                                                        <li><strong
                                                                                                                        class="highlight">智能过滤</strong>:
                                                                                                                为避免关系网过于杂乱，好感度在
                                                                                                                [-100,
                                                                                                                100]
                                                                                                                范围内的“普通”关系默认不显示。
                                                                                                        </li>
                                                                                                </ul>
                                                                                        </li>
                                                                                        <li>
                                                                                                <strong>通话记录 (Call
                                                                                                        Log)</strong>:
                                                                                                在这里可以查看您与所有角色的通话历史。
                                                                                                <ul
                                                                                                        class="list-circle list-inside ml-4">
                                                                                                        <li>记录会显示通话类型（视频/语音）、发起方（呼入/呼出）和通话时间。
                                                                                                        </li>
                                                                                                        <li>点击任意一条记录，可以展开查看本次通话期间的详细对话文字稿。
                                                                                                        </li>
                                                                                                </ul>
                                                                                        </li>
                                                                                        <li><strong>表情包
                                                                                                        (Stickers)</strong>:
                                                                                                您可以添加自定义表情包。支持通过URL或本地上传单个添加，也支持<span
                                                                                                        class="highlight">批量导入</span>。
                                                                                                <br>
                                                                                                现在，您可以直接粘贴从别处复制的文本列表，AI会自动尝试将其转换为所需的JSON格式，省去您手动复制Prompt去第三方网站转换的步骤。
                                                                                                批量导入后请刷新界面以查看新表情包。
                                                                                                <div class="mt-2">
                                                                                                        <details id="prompt-accordion"
                                                                                                                class="mt-2">
                                                                                                                <summary>
                                                                                                                        <span>批量导入JSON格式与转换Prompt</span>
                                                                                                                        <button id="copy-prompt-btn"
                                                                                                                                class="px-2 py-1 text-xs font-semibold rounded-md transition-colors">复制</button>
                                                                                                                </summary>
                                                                                                                <div
                                                                                                                        class="details-content">
                                                                                                                        <pre id="json-prompt-code"
                                                                                                                                class="w-full p-0 text-xs font-mono bg-transparent dark:bg-transparent whitespace-pre-wrap">
角色： 你是一个精准的文本到JSON格式转换器。
任务： 你的任务是将用户提供的表情包列表文本，严格按照指定的规则转换为JSON数组格式。
输入文本格式规则：
基础URL为 https:/……
每一行代表一个表情，格式为 表情名称：代码/文件名.jpg。
输出JSON格式规则：
输出必须是一个完整的JSON数组 [...]。
数组中的每一个元素都是一个对象 {...}。
每个对象必须包含两个键：
"name": 值为文本中的“表情名称”。
"url": 值为基础URL和文本中的“代码/文件名.jpg”拼接而成的完整URL。
你的回复只能包含最终的JSON代码块，不要添加任何解释、注释或额外的文字。
需要转换的文本：{下面粘贴世界书}
                                            </pre>
                                                                                                                </div>
                                                                                                        </details>
                                                                                                </div>
                                                                                        </li>
                                                                                        <li>
                                                                                                <strong>世界设定 (World
                                                                                                        Setting)</strong>:
                                                                                                这里是您世界观的核心。您可以在此处添加或编辑世界观设定、角色背景故事、重要事件等内容。
                                                                                                <ul
                                                                                                        class="list-circle list-inside ml-4">
                                                                                                        <li><strong>世界书</strong>:
                                                                                                                记录所有角色的背景故事、重要事件和设定。
                                                                                                        </li>
                                                                                                        <li><strong>编年史</strong>:
                                                                                                                记录所有角色的历史事件和时间线。
                                                                                                        </li>
                                                                                                </ul>
                                                                                        </li>
                                                                                </ul>

                                                                        </div>
                                                                </div>
                                                        </details>
                                                        <details id="chatroom-help">
                                                                <summary>聊天室</summary>
                                                                <div class="details-content space-y-3">
                                                                        <div>
                                                                                <h4 class="font-semibold">核心功能</h4>
                                                                                <ul
                                                                                        class="list-disc list-inside text-sm">
                                                                                        <li><span
                                                                                                        class="highlight">发送消息</span>:
                                                                                                输入文本后点击发送按钮或按Enter键。
                                                                                        </li>
                                                                                        <li><span
                                                                                                        class="highlight">等待回复</span>:
                                                                                                点击闪烁的星星图标，让AI角色对当前对话作出回应。此功能会消耗API额度。
                                                                                        </li>
                                                                                        <li><span
                                                                                                        class="highlight">长按消息</span>:
                                                                                                长按任意消息气泡可以进行<span
                                                                                                        class="highlight">复制</span>、<span
                                                                                                        class="highlight">收藏</span>、<span
                                                                                                        class="highlight">引用</span>、<span
                                                                                                        class="highlight">多选</span>或<span
                                                                                                        class="highlight">删除</span>操作。
                                                                                        </li>
                                                                                        <li><span
                                                                                                        class="highlight">拍一拍</span>:
                                                                                                双击对方或自己的头像，可以触发“拍一拍”互动。
                                                                                        </li>
                                                                                        <li><span
                                                                                                        class="highlight">查看资料</span>:
                                                                                                点击右上角图标，可以进入角色资料页。</li>
                                                                                </ul>
                                                                        </div>
                                                                        <div>
                                                                                <h4 class="font-semibold">底部功能栏按钮</h4>
                                                                                <ul
                                                                                        class="list-disc list-inside text-sm">
                                                                                        <li><span
                                                                                                        class="highlight">表情</span>:
                                                                                                打开并发送您在“我” ->
                                                                                                “表情”中添加的自定义表情。</li>
                                                                                        <li><span
                                                                                                        class="highlight">发送图片(描述)</span>:
                                                                                                发送关于图片的描述。</li>
                                                                                        <li><span
                                                                                                        class="highlight">发送图片(真实)</span>:
                                                                                                从<a href="#album-help"
                                                                                                        class="underline">相册</a>或本地上传真实图片。为了使用这项功能，需要在<a
                                                                                                        href="#settings-help"
                                                                                                        class="underline">设置</a>中使用支持视觉的模型，如Gemini
                                                                                                2.5 Pro等。</li>
                                                                                        <li><span
                                                                                                        class="highlight">转账/红包</span>:
                                                                                                在私聊中向对方发起模拟转账，或在群聊中发拼手气/专属红包。
                                                                                        </li>
                                                                                        <li><span
                                                                                                        class="highlight">发送语音</span>:
                                                                                                模拟发送一条语音消息。</li>
                                                                                        <li><span
                                                                                                        class="highlight">外卖代付</span>:
                                                                                                向对方发起一个模拟的外卖代付请求，对方可以同意或拒绝。
                                                                                        </li>
                
                                                                                        <li><span
                                                                                                        class="highlight">通话</span>:
                                                                                                与角色发起模拟的语音或视频通话。通话期间，你们的对话会被实时记录。
                                                                                        </li>
                                                                                        <li><span
                                                                                                        class="highlight">切换主题色</span>:
                                                                                                切换UI元素的主题高亮色来源（您的气泡颜色或对方的气泡颜色）。
                                                                                        </li>
                                                                                </ul>
                                                                        </div>
                                                                </div>
                                                        </details>
                                                </div>
                                        </details>



                                        <details id="summary-help">
                                                <summary class="flex items-center gap-3">
                                                        <div class="w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center">
                                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                                                </svg>
                                                        </div>
                                                        <span class="font-semibold">📄 动态</span>
                                                </summary>
                                                <div class="details-content space-y-6">
                                                        <div class="bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-xl p-6 border border-indigo-200 dark:border-indigo-800">
                                                                <div class="flex items-center gap-3 mb-4">
                                                                        <div class="w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center">
                                                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                                                </svg>
                                                                        </div>
                                                                        <div>
                                                                                <h3 class="text-lg font-bold text-gray-900 dark:text-white">智能离线模拟</h3>
                                                                                <p class="text-sm text-gray-600 dark:text-gray-400">让AI世界在您离开时也能继续运转</p>
                                                                        </div>
                                                                </div>
                                                                <p class="text-gray-800 dark:text-gray-200 leading-relaxed">
                                                                        当您离线超过 <a href="#settings-help" class="text-indigo-600 dark:text-indigo-400 hover:underline font-medium">设置</a> 中指定的时间后，系统会自动模拟所有分组中发生的故事和关系变化，并生成一份详细的动态供您阅读。
                                                                </p>
                                                        </div>
                                                        
                                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                                <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                                                                        <div class="flex items-center gap-3 mb-3">
                                                                                <div class="w-8 h-8 bg-gradient-to-br from-green-400 to-green-600 rounded-lg flex items-center justify-center">
                                                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                                                                                        </svg>
                                                                                </div>
                                                                                <h4 class="font-semibold text-gray-800 dark:text-gray-200">单人分组</h4>
                                                                        </div>
                                                                        <p class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed">生成个人事件和心理活动，不会有好感度变化。适合单独角色的深度体验。</p>
                                                                </div>
                                                                
                                                                <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                                                                        <div class="flex items-center gap-3 mb-3">
                                                                                <div class="w-8 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg flex items-center justify-center">
                                                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" />
                                                                                        </svg>
                                                                                </div>
                                                                                <h4 class="font-semibold text-gray-800 dark:text-gray-200">多人分组</h4>
                                                                        </div>
                                                                        <p class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed">生成群组动态，包括角色之间的互动、关系变化和重要事件。</p>
                                                                </div>
                                                        </div>
                                                        
                                                        <div class="info-badge">
                                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                                </svg>
                                                                动态内容会自动记录到关联的 <a href="#worldbook-help" class="underline font-medium">世界书（编年史）</a> 中，成为角色们的共同记忆
                                                        </div>
                                                </div>
                                        </details>

                                        <details id="album-help">
                                                <summary class="flex items-center gap-3">
                                                        <div class="w-8 h-8 bg-gradient-to-br from-pink-500 to-rose-600 rounded-lg flex items-center justify-center">
                                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                                                </svg>
                                                        </div>
                                                        <span class="font-semibold">🖼️ 相册</span>
                                                </summary>
                                                <div class="details-content space-y-6">
                                                        <div class="bg-gradient-to-r from-pink-50 to-rose-50 dark:from-pink-900/20 dark:to-rose-900/20 rounded-xl p-6 border border-pink-200 dark:border-pink-800">
                                                                <div class="flex items-center gap-3 mb-4">
                                                                        <div class="w-10 h-10 bg-gradient-to-br from-pink-500 to-rose-600 rounded-lg flex items-center justify-center">
                                                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                                                                                </svg>
                                                                        </div>
                                                                        <div>
                                                                                <h3 class="text-lg font-bold text-gray-900 dark:text-white">公共图片库</h3>
                                                                                <p class="text-sm text-gray-600 dark:text-gray-400">与所有AI角色共享的视觉资源</p>
                                                                        </div>
                                                                </div>
                                                                <p class="text-gray-800 dark:text-gray-200 leading-relaxed">
                                                                        一个中心化的图片存储空间，您可以通过URL或本地上传添加图片。这些图片可以用作壁纸、聊天背景，甚至被AI角色作为个人主页背景使用。
                                                                </p>
                                                        </div>
                                                        
                                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                                <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                                                                        <div class="flex items-center gap-3 mb-3">
                                                                                <div class="w-8 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg flex items-center justify-center">
                                                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                                                                        </svg>
                                                                                </div>
                                                                                <h4 class="font-semibold text-gray-800 dark:text-gray-200">个人使用</h4>
                                                                        </div>
                                                                        <p class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed">不填写描述的图片只有您可以使用，可以在 <a href="#personalization-help" class="text-blue-600 dark:text-blue-400 hover:underline font-medium">个性化设置</a> 中用作壁纸或在角色编辑中用作聊天背景。</p>
                                                                </div>
                                                                
                                                                <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                                                                        <div class="flex items-center gap-3 mb-3">
                                                                                <div class="w-8 h-8 bg-gradient-to-br from-purple-400 to-purple-600 rounded-lg flex items-center justify-center">
                                                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z" />
                                                                                        </svg>
                                                                                </div>
                                                                                <h4 class="font-semibold text-gray-800 dark:text-gray-200">AI共享</h4>
                                                                        </div>
                                                                        <p class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed">添加描述的图片可AI角色使用，他们有概率将其作为个人主页背景。</p>
                                                                </div>
                                                        </div>
                                                        
                                                        <div class="info-badge">
                                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10" />
                                                                </svg>
                                                                本地上传功能需要配置 <a href="#cloudinary-setup" class="underline font-medium">Cloudinary服务</a>
                                                        </div>
                                                </div>
                                        </details>

                                        <details id="settings-help">
                                                <summary>设置</summary>
                                                <div class="details-content space-y-4">
                                                        <details>
                                                                <summary>API 连接</summary>
                                                                <div class="details-content">
                                                                        <p class="text-sm">
                                                                                配置连接AI模型所需的信息，包括API地址、密钥和模型名称。支持保存和切换多个不同的API方案（例如，一个用于GPT，一个用于Gemini）。
                                                                                直连则不需要填写反代地址，仅需填写API密匙和选择模型。
                                                                        </p>
                                                                </div>
                                                        </details>
                                                        <details id="cloudinary-setup">
                                                                <summary>图片上传 (Cloudinary)</summary>
                                                                <div class="details-content">
                                                                        <p class="text-sm">
                                                                                为了能从本地上传图片，您需要注册一个免费的Cloudinary账号，并在其官网设置中创建一个<span
                                                                                        class="highlight">无签名
                                                                                        (Unsigned)</span>的上传预设 (Upload
                                                                                Preset)，然后将您的<span
                                                                                        class="highlight">Cloud
                                                                                        Name</span>和<span
                                                                                        class="highlight">Upload
                                                                                        Preset</span>名称填写到此处。详细步骤请参考<a
                                                                                        href="#cloudinary-guide"
                                                                                        class="underline">Cloudinary
                                                                                        设置指南</a>。</p>
                                                                </div>
                                                        </details>
                                                        <details>
                                                                <summary>后台活动</summary>
                                                                <div class="details-content">
                                                                        <p class="text-sm">
                                                                                开启后，AI角色们会在后台独立“生活”，可能会主动给您发消息、发布动态、或在群聊里主动发言。<strong>注意：此功能会显著增加API费用。</strong>
                                                                                您可以调整活动检测的频率和概率来控制消耗。</p>
                                                                        <p class="text-xs text-gray-500 mt-2">
                                                                                <strong>它和“离线模拟/动态”有什么不同？</strong>
                                                                        <ul
                                                                                class="list-disc list-inside text-xs text-gray-500 ml-4">
                                                                                <li><strong>后台活动</strong>: 是<span
                                                                                                class="highlight">实时</span>的、<span
                                                                                                class="highlight">持续性</span>的。只要您开着应用，角色们就会像真人一样独立生活，随时可能给您发消息或发布动态。
                                                                                </li>
                                                                                <li><strong>离线模拟</strong>: 是<span
                                                                                                class="highlight">一次性</span>的、<span
                                                                                                class="highlight">回顾性</span>的。它只在您长时间未打开应用后，在下一次启动时运行，用于总结您“离开”期间世界上发生的大事。
                                                                                </li>
                                                                        </ul>
                                                                        </p>
                                                                </div>
                                                        </details>
                                                        <details>
                                                                <summary>数据管理</summary>
                                                                <div class="details-content">
                                                                        <p class="text-sm"><span
                                                                                        class="highlight">导出备份</span>:
                                                                                将您的所有数据打包成一个JSON文件下载到本地。<br><span
                                                                                        class="highlight">导入备份</span>:
                                                                                从本地选择之前导出的JSON文件，恢复所有数据（会覆盖当前数据）。<br><span
                                                                                        class="highlight">云同步</span>:
                                                                                通过GitHub Gist实现多设备数据同步。详细步骤请参考<a
                                                                                        href="#gist-guide"
                                                                                        class="underline">GitHub Gist
                                                                                        设置指南</a>。</p>
                                                                </div>
                                                        </details>
                                                </div>
                                        </details>

                                        <details id="personalization-help">
                                                <summary>个性化</summary>
                                                <div class="details-content">
                                                        <p>
                                                                自定义应用的全局外观。您可以设置主屏幕的壁纸、所有界面的主题高亮色，以及更换全局字体（需要提供字体文件的URL）。
                                                                <span class="highlight">壁纸</span>现在支持三种模式：
                                                        <ul class="list-disc list-inside text-sm mt-2 space-y-1">
                                                                <li><strong>图片</strong>: 使用您提供的URL或从相册选择一张图片作为背景。</li>
                                                                <li><strong>渐变</strong>: 从预设中选择或自定义两种颜色，生成动态的渐变背景。</li>
                                                                <li><strong>拓扑</strong>: 生成动态的、具有科技感的拓扑网络动画作为背景。</li>
                                                        </ul>
                                                        主题模式为“自动”时，应用会根据系统的深色模式设置自动切换。
                                                        </p>
                                                </div>
                                        </details>

                                        <details id="worldbook-help">
                                                <summary>世界书</summary>
                                                <div class="details-content">
                                                        <p>“世界书”是用于定义世界观、角色背景、共同记忆的知识库。AI在生成回复时会优先参考关联的世界书内容，确保对话符合您设定的宏大背景。
                                                                您可以在 我 -> <span
                                                                        class="highlight">世界设定</span>页面将不同的世界书关联到不同的角色分组上，也可以在角色编辑页面直接关联到单个角色上。注意不要重复在分组和角色上关联同一世界书。
                                                                特别地，名为“编年史”的世界书会自动记录由<a href="#summary-help"
                                                                        class="underline">离线模拟</a>生成的事件。</p>
                                                </div>
                                        </details>
                                        <details id="char-profile-help">
                                                <summary>角色主页</summary>
                                                <div class="details-content space-y-4">
                                                        <p>这里是角色的个人中心，展示了TA的核心信息和动态。</p>
                                                        <ul class="list-disc list-inside text-sm space-y-2">
                                                                <li><span class="highlight">核心信息</span>:
                                                                        您可以看到角色的头像、昵称、名字，以及通过互动变化的好感度分数。</li>
                                                                <li><span class="highlight">基本资料</span>:
                                                                        包括根据生日自动计算的年龄和星座、性别以及所属分组。</li>
                                                                <li><span class="highlight">动态入口</span>:
                                                                        快速进入该角色的个人动态时间线，只看TA发布的内容。</li>
                                                                <li><span class="highlight">日记入口</span>:
                                                                        查看该角色在与您互动后，私下记录的带有深刻情感或思考的日记。
                                                                        <ul class="list-circle list-inside ml-4">
                                                                                <li>日记中的<span
                                                                                                class="highlight">关键词</span>可能会在后续聊天中被触发，作为角色的“回忆”影响其对话。
                                                                                </li>
                                                                                <li>您可以在日记页面编辑日记的内容和关键词。</li>
                                                                        </ul>
                                                                </li>
                                                                <li><span class="highlight">回忆入口</span>:
                                                                        查看与该角色相关的回忆（包括倒计时约定）。</li>
                                                        </ul>
                                                </div>
                                        </details>

                                        <details id="char-edit-profile-help">
                                                <summary>角色/群聊编辑</summary>
                                                <div class="details-content space-y-4">
                                                        <p>在这里，您可以深度定制角色的方方面面，这些设定将直接影响AI的行为逻辑。</p>
                                                        <ul class="list-disc list-inside text-sm space-y-3">
                                                                <li><span class="highlight">基础设定</span>:
                                                                        修改角色的头像、昵称、名字、生日、性别、人设和所属分组。</li>
                                                                <li><span class="highlight">初始关系设定</span>:
                                                                        设定该角色对“你”以及对“同分组其他角色”的初始好感度和关系类型（如朋友、恋人）。</li>
                                                                <li><span class="highlight">聊天背景与气泡</span>:
                                                                        为与该角色的聊天室设置独立的背景图和聊天气泡颜色主题。</li>
                                                                <li>
                                                                        <span class="highlight">AI生成气泡样式 (CSS)</span>:
                                                                        <ul class="list-circle list-inside ml-4">
                                                                                <li>输入一段自然语言描述（如“我想要一个带粉色描边的半透明玻璃质感气泡”），AI会为您生成对应的CSS代码来实现这个效果。
                                                                                </li>
                                                                                <li><strong
                                                                                                class="text-gray-800 dark:text-gray-200">迭代与优化</strong>：AI生成代码后会填充到文本框中。您可以保留这些代码，然后在上方的输入框中继续提出修改建议（如“边框再粗一点”），AI会基于现有代码进行修改，实现逐步优化的效果。
                                                                                </li>
                                                                        </ul>
                                                                </li>
                                                        </ul>
                                                </div>
                                        </details>
                                </div>
                        </section>


                        <section id="services-guide" class="section-card">
                                <div class="section-card-header">
                                        <h2 class="text-lg font-semibold">第三方服务设置指南</h2>
                                        <p class="text-sm">为了使用图片上传和云同步功能，您需要配置两个免费的第三方服务。</p>
                                </div>
                                <div class="section-card-content">
                                        <details id="cloudinary-guide">
                                                <summary>Cloudinary 设置指南 (用于图片上传)</summary>
                                                <div class="details-content">
                                                        <p class="mb-2">Cloudinary 是一个强大的图片和视频管理服务，其免费套餐足以满足本应用的需求。</p>
                                                        <ol class="list-decimal list-inside space-y-2 text-sm">
                                                                <li><strong>第1步：注册账户</strong>
                                                                        <br>访问 <a
                                                                                href="https://cloudinary.com/users/register/free"
                                                                                target="_blank"
                                                                                class="underline">Cloudinary 免费注册页面</a>
                                                                        并创建一个新账户。
                                                                </li>
                                                                <li><strong>第2步：找到您的 Cloud Name</strong>
                                                                        <br>登录后，您会进入控制台 (Dashboard)。在 “Account Details”
                                                                        (账户详情) 部分，找到您的 <code>Cloud Name</code>
                                                                        (云名称)，并复制它。
                                                                </li>
                                                                <li><strong>第3步：创建上传预设 (Upload Preset)</strong>
                                                                        <br> a. 在顶部导航栏，点击齿轮图标进入
                                                                        <strong>Settings</strong> (设置)。
                                                                        <br> b. 点击 <strong>Upload</strong> (上传) 标签页。
                                                                        <br> c. 滚动到底部，找到 <strong>Upload presets</strong>
                                                                        (上传预设) 部分。
                                                                        <br> d. 点击右侧的 <strong>Add upload preset</strong>
                                                                        (添加上传预设) 按钮。
                                                                </li>
                                                                <li><strong>第4步：配置上传预设</strong>
                                                                        <br> a. <strong>Signing Mode</strong> (签名模式)
                                                                        这一项【必须】从默认的 “Signed” 修改为
                                                                        <strong>Unsigned</strong> (未签名)。这是最关键的一步。
                                                                        <br> b. 您可以为这个预设起一个容易记住的名字（例如
                                                                        `starchat-unsigned`），也可以使用系统生成的随机名。
                                                                        <br> c. 其他设置保持默认即可。点击页面底部的 <strong>Save</strong>
                                                                        (保存) 按钮。
                                                                </li>
                                                                <li><strong>第5步：复制预设名称</strong>
                                                                        <br>保存后，您会返回到上传预设列表。找到您刚刚创建的预设，并复制它的
                                                                        <strong>Preset name</strong> (预设名称)。
                                                                </li>
                                                                <li><strong>第6步：填入 starchat 设置</strong>
                                                                        <br>回到 starchat 的“设置”页面，将第2步复制的
                                                                        <code>Cloud Name</code> 和第5步复制的
                                                                        <code>Upload Preset</code>
                                                                        名称，分别粘贴到对应的输入框中，然后点击保存。
                                                                </li>
                                                        </ol>
                                                </div>
                                        </details>
                                        <details id="gist-guide">
                                                <summary>GitHub Gist 设置指南 (用于云同步)</summary>
                                                <div class="details-content">
                                                        <p class="mb-2">我们使用 GitHub Gist 来存储您的备份数据，实现跨设备同步。您需要一个 GitHub
                                                                账户。</p>
                                                        <ol class="list-decimal list-inside space-y-2 text-sm">
                                                                <li><strong>第1步：创建 Secret Gist</strong>
                                                                        <br> a. 登录 <a href="https://github.com/"
                                                                                target="_blank"
                                                                                class="underline">GitHub</a>，然后访问 <a
                                                                                href="https://gist.github.com/"
                                                                                target="_blank" class="underline">Gist
                                                                                网站</a>。
                                                                        <br> b. 在 “Filename including extension...”
                                                                        (文件名) 输入框中，填写 <code>starchat_backup.json</code>。
                                                                        <br> c. 在文件内容区域随便输入一些文字，例如 <code>{}</code>。
                                                                        <br> d. 点击右下角的 “Create secret gist” (创建私密 Gist)
                                                                        按钮。<strong>请务必选择 Secret，不要选择 Public。</strong>
                                                                </li>
                                                                <li><strong>第2步：获取 Gist ID</strong>
                                                                        <br>创建成功后，浏览器地址栏的 URL 会变成类似
                                                                        <code>https://gist.github.com/YourUsername/abcdef1234567890</code>
                                                                        的格式。
                                                                        <br>地址栏最后那串由字母和数字组成的字符串 (例如
                                                                        <code>abcdef1234567890</code>) 就是您的 <strong>Gist
                                                                                ID</strong>。请复制它。
                                                                </li>
                                                                <li><strong>第3步：创建 Personal Access Token (PAT)</strong>
                                                                        <br> a. 回到 <a href="https://github.com/"
                                                                                target="_blank" class="underline">GitHub
                                                                                主站</a>，点击右上角您的头像，选择
                                                                        <strong>Settings</strong> (设置)。
                                                                        <br> b. 在左侧菜单滚动到底部，选择 <strong>Developer
                                                                                settings</strong> (开发者设置)。
                                                                        <br> c. 依次选择 <strong>Personal access
                                                                                tokens</strong> -> <strong>Tokens
                                                                                (classic)</strong>。
                                                                        <br> d. 点击 <strong>Generate new
                                                                                token</strong>，然后选择 <strong>Generate new
                                                                                token (classic)</strong>。
                                                                </li>
                                                                <li><strong>第4步：配置 Token 权限</strong>
                                                                        <br> a. 在 <strong>Note</strong> (备注) 栏填写一个描述，例如
                                                                        `starchat Sync`。
                                                                        <br> b. 在 <strong>Expiration</strong> (有效期)
                                                                        栏，建议选择 <strong>No expiration</strong> (无有效期)，否则
                                                                        Token 过期后同步会失败。
                                                                        <br> c. 在 <strong>Select scopes</strong>
                                                                        (选择权限范围) 部分，只需勾选
                                                                        <strong><code>gist</code></strong> 这一个权限即可。
                                                                        <br> d. 滚动到页面底部，点击 <strong>Generate
                                                                                token</strong> 按钮。
                                                                </li>
                                                                <li><strong>第5步：复制您的 Token</strong>
                                                                        <br>页面会显示您新生成的 Token，它以 <code>ghp_</code>
                                                                        开头。<strong>这是您唯一一次看到这个 Token
                                                                                的机会</strong>，请立即点击复制按钮，并将它保存在一个安全的地方。
                                                                </li>
                                                                <li><strong>第6步：填入 starchat 设置</strong>
                                                                        <br>回到 starchat 的“设置”页面，将第2步复制的
                                                                        <code>Gist ID</code> 和第5步复制的
                                                                        <code>Personal Access Token</code>，分别粘贴到云同步区域的对应输入框中，然后点击保存。
                                                                </li>
                                                        </ol>
                                                </div>
                                        </details>
                                        <details id="elevenlabs-guide">
                                                <summary>ElevenLabs 设置指南 (用于语音合成)</summary>
                                                <div class="details-content">
                                                        <p class="mb-2">ElevenLabs 提供了高质量的 AI 语音合成服务，其免费套餐包含每月 10,000 个字符的额度，足以满足个人项目的测试和日常使用。</p>
                                                        <ol class="list-decimal list-inside space-y-2 text-sm">
                                                                <li><strong>第1步：访问官网并注册</strong>
                                                                        <br>前往 <a href="https://elevenlabs.io/" target="_blank" class="underline">ElevenLabs
                                                                                官方网站</a>
                                                                        并点击右上角的 "Sign Up" (注册)。您可以使用邮箱、Google 账户快速创建新账户。
                                                                </li>
                                                                <li><strong>第2步：找到您的 API 密钥</strong>
                                                                        <br>登录后，点击页面右上角您的头像图标，在弹出的菜单中选择
                                                                        <strong>API key</strong> ( API 密钥)。
                                                                </li>
                                                                <li><strong>第3步：创建并复制 API 密钥</strong>
                                                                        <br>选择<strong>Create API Key</strong> （创建API密钥），之后在弹出菜单中将<strong>Restrict Key</strong>旁的开关关闭。
                                                                        然后点击<strong>Copy to clipboard</strong>将其复制到剪贴板。
                                                                        <br><strong class="text-red-500 dark:text-red-400">请注意：</strong> 这个密钥非常重要，不要泄露给任何人。
                                                                </li>
                                                                <li><strong>第4步：在 starchat 中创建并粘贴</strong>
                                                                        <br> a. 回到 starchat 的“设置”页面，在“TTS 语音服务”板块，点击“新增方案”。
                                                                        <br> b. 为方案起一个名字（例如 `My ElevenLabs`），然后将第3步复制的 `API Key` 粘贴到对应的输入框中。
                                                                </li>
                                                                <li><strong>第5步：保存设置</strong>
                                                                        <br>回到 starchat 的“设置”页面顶部，点击“保存”按钮，您的 TTS 服务就配置完成了。之后您就可以在角色编辑页面为他们选择喜欢的声音了。
                                                                </li>
                                                        </ol>
                                                </div>
                                        </details>
                                </div>
                        </section>
                        <section id="Advance-guide" class="section-card">
                                <div class="section-card-header">
                                        <h2 class="text-lg font-semibold">进阶功能详解</h2>
                                </div>
                                <div class="section-card-content">
                                        <details id="world-settings-dynamic-help">
                                                <summary>世界设定与动态</summary>
                                                <div class="details-content space-y-4">
                                                        <div>
                                                                <h4 class="font-semibold">世界设定 (World Setting)</h4>
                                                                <p class="text-sm">
                                                                        此页面用于调整AI角色在后台的自主行为逻辑，核心功能是“离线模拟”与“情报网”。</p>
                                                                <ul
                                                                        class="list-disc list-inside text-sm mt-2 space-y-1">
                                                                        <li><strong>离线模拟</strong>:
                                                                                当您离线超过设定的时间后，AI会自动模拟这段时间内角色之间可能发生的互动、关系变化或个人事件，并生成一份<a
                                                                                        href="#summary-help"
                                                                                        class="underline">动态</a>。这会让角色的故事在您不在的时候也能延续。
                                                                        </li>
                                                                        <li><strong>情报网 (Intelligence Network)</strong>:
                                                                                <ul
                                                                                        class="list-circle list-inside ml-4">
                                                                                        <li><strong>工作原理</strong>:
                                                                                                当您进入与某个角色的私聊时，如果距离上次搜集情报超过了冷却时间，该角色会秘密地“打探”其社交圈（同分组的好友）最近和您的聊天记录以及他们发布的动态。
                                                                                        </li>
                                                                                        <li><strong>目的</strong>:
                                                                                                这能让角色获取到您与其他人的互动信息，使对话更具深度和真实感。例如，如果角色A通过情报网得知您和角色B聊过某个话题，它可能会在和您的对话中主动提及：“我听说你和B最近在讨论...”。
                                                                                        </li>
                                                                                        <li><strong>情报触发主动消息</strong>:
                                                                                                若开启此选项，当角色通过情报网发现“有趣”的信息时（例如您提到了TA的名字），TA可能会主动开启一段新的对话来询问或评论此事。
                                                                                        </li>
                                                                                </ul>
                                                                        </li>
                                                                        <li><strong>分组管理</strong>:
                                                                                您可以将不同的“世界书”关联到不同的分组上。该分组下的所有角色在思考和回应时，都会将这些世界书的内容作为最高优先级的背景知识来参考。
                                                                        </li>
                                                                </ul>
                                                        </div>
                                                        <div>
                                                                <h4 class="font-semibold">动态 (Moments) 互动规则</h4>
                                                                <p class="text-sm">动态区模拟了一个真实的朋友圈环境，角色之间的互动遵循以下规则：</p>
                                                                <ul
                                                                        class="list-disc list-inside text-sm mt-2 space-y-1">
                                                                        <li><strong>可见性规则</strong>: 角色只能看到并互动其<span
                                                                                        class="highlight">同一分组内</span>其他角色以及您发布的动态（除非您设置了分组可见）。
                                                                        </li>
                                                                        <li><strong>提及 (@) 与后续互动</strong>:
                                                                                当您或某个角色在动态中提到了另一个角色后，被提及的角色会收到一条系统通知。当您之后进入与该角色的聊天室时，TA会<span
                                                                                        class="highlight">优先</span>对这条提及TA的动态做出回应（如评论、点赞或私下询问）。这创造了从公开社交到私密对话的自然过渡。
                                                                        </li>
                                                                        <li><strong>评论身份</strong>:
                                                                                角色在动态下发表评论时，其身份和人设将基于其<span
                                                                                        class="highlight">自身绑定的人格预设</span>（如果在“我”->“个人设置”中为其指定了特定人格），而不是您当前使用的全局默认人格。这保证了角色行为的一致性。
                                                                        </li>
                                                                </ul>
                                                        </div>
                                                </div>
                                        </details>

                                        <details id="advanced-features-help">
                                                <summary>AI自主生活与人设</summary>
                                                <div class="details-content space-y-4">
                                                        <p>AI角色拥有自己的“生活”，不仅会回应您的消息，还会在后台独立行动。一个详细的人设是驱动这些行为的关键。本节将详细介绍AI的自主行为，并提供一个工具来帮您构建更生动的角色。
                                                        </p>

                                                        <div class="p-4 rounded-lg bg-gray-50 dark:bg-gray-800/50">
                                                                <h4 class="font-semibold text-base mb-2">AI的自主生活 (AI's
                                                                        Independent Life)</h4>
                                                                <p class="text-sm mb-3">角色的自主行为分为两种，均由其核心人设驱动：</p>
                                                                <div class="space-y-3">
                                                                        <div>
                                                                                <h5 class="font-semibold">1. 后台活动
                                                                                        (实时在线行为)</h5>
                                                                                <p class="text-sm">当您在“设置”中开启<span
                                                                                                class="highlight">后台活动</span>后，角色们会像真人一样实时地、独立地生活和社交。您可能会观察到他们：
                                                                                </p>
                                                                                <ul
                                                                                        class="list-disc list-inside text-sm mt-2 space-y-1 text-gray-600 dark:text-gray-400">
                                                                                        <li><strong>主动聊天:</strong>
                                                                                                根据人设和最近的事件，突然给您发来私信，开启一个新话题。
                                                                                        </li>
                                                                                        <li><strong>发布动态:</strong>
                                                                                                在“动态”区发布新的文字或图片动态，分享自己的所见所闻或心情。
                                                                                        </li>
                                                                                        <li><strong>社交互动:</strong>
                                                                                                浏览自己可见的动态，并可能进行<span
                                                                                                        class="highlight">点赞</span>或<span
                                                                                                        class="highlight">评论</span>。
                                                                                        </li>
                                                                                        <li><strong>群聊活动:</strong>
                                                                                                在群聊中，角色可能会随机发起一个话题、发送表情包，甚至是<span
                                                                                                        class="highlight">发红包</span>或邀请大家<span
                                                                                                        class="highlight">点外卖</span>。
                                                                                        </li>
                                                                                </ul>
                                                                        </div>
                                                                        <div>
                                                                                <h5 class="font-semibold">2. 离线模拟 (离线回顾)
                                                                                </h5>
                                                                                <p class="text-sm">
                                                                                        当您离线超过设定时间后，此功能会一次性触发。它更侧重于故事推进，模拟并总结您离开期间发生的<strong>重大事件</strong>。其结果会：
                                                                                </p>
                                                                                <ul
                                                                                        class="list-disc list-inside text-sm mt-2 space-y-1 text-gray-600 dark:text-gray-400">
                                                                                        <li>在<a href="#summary-help"
                                                                                                        class="underline">动态</a>应用中生成一份总结报告。
                                                                                        </li>
                                                                                        <li>将角色间的<span
                                                                                                        class="highlight">关系变化</span>、个人目标的<span
                                                                                                        class="highlight">重要进展</span>或挫折，自动记入关联世界书的“编年史”中。
                                                                                        </li>
                                                                                </ul>
                                                                        </div>
                                                                </div>
                                                        </div>

                                                        <div class="p-4 rounded-lg bg-gray-50 dark:bg-gray-800/50 mt-4">
                                                                <h4 class="font-semibold text-base mb-2">生成详细人设的辅助Prompt
                                                                </h4>
                                                                <p class="text-sm mb-3">
                                                                        为了让AI角色的自主行为更符合您的想象，一个详细的人设至关重要。您可以将以下模板和您的基础人设一起提供给一个强大的语言模型（如GPT-4,
                                                                        Claude 3, Gemini 1.5
                                                                        Pro等），来生成更丰富、更适用于本应用的角色设定。之后，将生成的结果填入角色的“人设”字段即可。
                                                                </p>
                                                                <div>
                                                                        <details id="prompt-accordion" class="mt-2">
                                                                                <summary>
                                                                                        <span>生成更适用于此网站人设的Prompt</span>
                                                                                        <button id="copy-prompt-btn"
                                                                                                class="px-2 py-1 text-xs font-semibold rounded-md transition-colors">复制</button>
                                                                                </summary>
                                                                                <div class="details-content">
                                                                                        <pre id="json-prompt-code"
                                                                                                class="w-full p-0 text-xs font-mono bg-transparent dark:bg-transparent whitespace-pre-wrap">
# 角色
你是一个世界级的角色设定扩展器，专注于为一个名为“starchat”的超真实模拟聊天应用创建角色档案。

# 任务
你的任务是基于我提供的【基础人设】，将其扩展成一个详尽、立体、且能直接应用于“starchat”后台行为逻辑的角色档案。档案需要明确定义该角色在使用这个模拟手机时的各种行为习惯和内在规则。

# 应用功能背景
角色在应用中可以：
- 私聊和群聊。
- 发送文本、图片、语音（文字模拟）、表情包。
- 在“动态”区（类似朋友圈）发帖、点赞、评论。
- 发红包、参与外卖代付。
- “拍一拍”其他角色或用户。
- 拥有好感度会变化的人际关系。
- 在后台独立生活，会主动发起上述行为。

# 输出要求
请严格按照以下格式组织你的输出，直接提供扩展后的人设内容，不要包含任何额外的解释。

## 核心人设
[这里是你对【基础人设】的提炼和润色，保持其核心魅力。]

## 聊天行为习惯
- **打字风格:** [描述角色的打字习惯。例如：从不使用句号，喜欢用波浪线结尾。喜欢发很多简短的消息而不是一段长文。每句话都带一个emoji。]
- **主动性:** [描述角色主动发起对话的倾向。例如：极少主动发起对话，除非有非常重要的事。是社交核心，总是主动开启新话题。]

## 应用功能偏好
- **最喜欢的功能:** [从功能背景中选择1-2个角色最喜欢用的功能。例如：发动态，热衷于分享生活的点点滴滴。]
- **最讨厌/绝不使用的功能:** [选择1-2个角色几乎从不使用的功能。例如：极度讨厌语音消息，收到也假装没看见。觉得“拍一拍”很幼稚，从不使用。]
- **社交媒体行为:** [描述在“动态”区的具体行为。例如：潜水党，只看不发。是点赞狂魔，给所有朋友点赞。只评论自己感兴趣的特定话题。]
- **经济观念:** [描述对红包和转账的态度。例如：视财如命，看到红包必抢，但从不发。对朋友非常大方，经常主动发红包。]

## 绝对行为准则 (内在规则)
[列出3-5条该角色绝对会遵守或绝对不会去做的行为准则，这是驱动其后台行为的核心逻辑。]
- 例1: 绝对不会在晚上11点后主动给任何人发消息。
- 例2: 无论和谁吵架，都绝对不会是先道歉的那一个。
- 例3: [某个特定好友]发的任何动态，都会无条件第一时间点赞。
- 例4: 如果收到了不喜欢的人发来的消息，会故意已读不回。

---
请根据以下【基础人设】进行扩展：

[在这里粘贴您自己角色的基础人设，例如：“一个傲娇的猫系少年，表面冷漠毒舌，内心却很善良，渴望被理解。喜欢打游戏和看书。”]
                                        </pre>
                                                                                </div>
                                                                        </details>
                                                                </div>
                                                        </div>

                                                </div>
                                        </details>
                                </div>

                        </section>

                        <section id="advanced-and-faq-section" class="section-card">
                                <div class="section-card-header">
                                        <h2 class="text-lg font-semibold">高级功能与排错</h2>
                                        <p class="text-sm">用于数据管理、问题修复和解答常见疑问。</p>
                                </div>
                                <div class="section-card-content">
                                        <details>
                                                <summary>高级工具</summary>
                                                <div class="details-content space-y-4">
                                                        <details>
                                                                <summary class="text-sm font-medium">导入/导出角色卡</summary>
                                                                <div class="details-content space-y-2 text-sm">
                                                                        <p>此功能允许您分享或备份单个角色。导出的 <span
                                                                                        class="highlight">.json</span>
                                                                                文件包含了角色的核心设定，如：<span
                                                                                        class="highlight">人设、头像库、备注名、分组、聊天背景、气泡主题</span>
                                                                                等。</p>
                                                                        <p class="text-red-500 dark:text-red-400">
                                                                                请注意：导出的角色卡<strong>不会</strong>
                                                                                包含角色的聊天记录、动态、日记、好感度关系等由AI在后续交互中生成的具体内容。
                                                                        </p>
                                                                </div>
                                                        </details>
                                                        <details>
                                                                <summary class="text-sm font-medium">修复聊天记录</summary>
                                                                <div class="details-content space-y-2 text-sm">
                                                                        <p>此工具会扫描并删除所选角色聊天记录中所有用户不可见的 <span
                                                                                        class="highlight">系统消息 (System
                                                                                        Message)</span>。</p>
                                                                        <p>主要用于修复一些疑难杂症，例如：</p>
                                                                        <ul class="list-disc list-inside ml-2">
                                                                                <li>发起通话时长时间无响应或失败。</li>
                                                                                <li>AI在对话中行为异常，可能受到了损坏的隐藏指令影响。</li>
                                                                        </ul>
                                                                </div>
                                                        </details>
                                                        <details>
                                                                <summary class="text-sm font-medium">清空聊天记录</summary>
                                                                <div class="details-content space-y-2 text-sm">
                                                                        <p>此工具会永久删除您与所选角色的 <strong>全部</strong>
                                                                                聊天记录，但会完整保留角色的所有设定（人设、头像、好感度等）。</p>
                                                                </div>
                                                        </details>
                                                        <details>
                                                                <summary class="text-sm font-medium">重置角色内容</summary>
                                                                <div class="details-content space-y-2 text-sm">
                                                                        <p>这是一个更彻底的清理工具。它会保留角色的核心设定（人设、头像等），但会删除该角色
                                                                                <strong>所有</strong>   后续生成的AI内容，包括：聊天记录、发布的动态、撰写的日记与回忆、通话记录等。
                                                                        </p>
                                                                </div>
                                                        </details>
                                                </div>
                                        </details>
                                        <details>
                                                <summary>常见问题与故障排查</summary>
                                                <div class="details-content space-y-4">
                                                        <p>遇到问题时，可以先尝试刷新页面。如果问题仍然存在，请参考以下常见情况的解释：</p>

                                                        <div>
                                                                <h4 class="font-semibold">问题：提示“系统正忙，请稍后再试”</h4>
                                                                <p class="text-sm">
                                                                        <strong>原因:</strong>
                                                                        这通常意味着一个AI角色正在后台执行操作（例如，另一个角色正在独立思考、准备给你发消息或发布动态），暂时占用了API通道。您的操作需要排队。
                                                                        <br>
                                                                        <strong>解决方法:</strong>
                                                                </p>
                                                                <ul
                                                                        class="list-disc list-inside text-sm mt-1 space-y-1">
                                                                        <li>稍等片刻（通常几秒钟），然后重试。后台任务通常很快就会完成。</li>
                                                                        <li>切换到手机上的其他应用（或浏览器其他标签页），再切回来。这通常会中断正在进行的后台任务，为您让出API通道。
                                                                        </li>
                                                                </ul>
                                                        </div>

                                                        <hr class="border-gray-300 dark:border-gray-600">

                                                        <div>
                                                                <h4 class="font-semibold">
                                                                        问题：聊天界面显示“对方正在输入...”，但长时间没有收到回复</h4>
                                                                <p class="text-sm">
                                                                        <strong>原因:</strong>
                                                                        应用已经成功向AI发送了您的消息，但未能收到有效的回复。这几乎总是由API端的问题导致的。例如：
                                                                </p>
                                                                <ul
                                                                        class="list-disc list-inside text-sm mt-1 space-y-1">
                                                                        <li>网络连接不稳定或中断。</li>
                                                                        <li>您在“设置”中填写的API密钥不正确或已失效。</li>
                                                                        <li>API服务提供商（如OpenAI, Google等）的服务器暂时出现问题或过载。
                                                                        </li>
                                                                        <li>您的账户余额不足。</li>
                                                                </ul>
                                                                <p class="text-sm mt-2">
                                                                        <strong>解决方法:</strong>
                                                                </p>
                                                                <ul
                                                                        class="list-disc list-inside text-sm mt-1 space-y-1">
                                                                        <li>检查您的网络连接。</li>
                                                                        <li>前往“设置” -> “API连接”，确认您的API密钥和配置无误。</li>
                                                                        <li>如果多次尝试仍然失败，可以稍后再试，或检查API服务商的官方状态页面。</li>
                                                                </ul>
                                                        </div>

                                                        <hr class="border-gray-300 dark:border-gray-600">

                                                        <div>
                                                                <h4 class="font-semibold">问题：弹出“AI响应格式错误，无法解析JSON”的警告
                                                                </h4>
                                                                <p class="text-sm">
                                                                        <strong>原因:</strong>
                                                                        这是因为AI模型没有严格遵守输出JSON对象的格式要求，返回了包含额外文本或格式错误的内容。尽管应用的Prompt已经尽力引导，但这种情况仍可能偶尔发生，尤其是在模型负载较高时。
                                                                        <br>
                                                                        <strong>解决方法:</strong>
                                                                </p>
                                                                <ul
                                                                        class="list-disc list-inside text-sm mt-1 space-y-1">
                                                                        <li>这是最直接有效的办法：点击“等待回复”按钮，重新请求一次。模型第二次通常能给出正确格式的回复。
                                                                        </li>
                                                                        <li>如果连续多次出现此错误，可以尝试编辑您发送的最后一条消息，稍微改变一下措辞，然后重新发送。
                                                                        </li>
                                                                </ul>
                                                        </div>
                                                </div>
                                        </details>
                                </div>
                        </section>

                </main>
        </div>
        <script type="module">
                import { showToast } from './ui-helpers.js';

                document.addEventListener('DOMContentLoaded', () => {
                        const copyButton = document.getElementById('copy-prompt-btn');
                        const codeBlock = document.getElementById('json-prompt-code');

                        if (copyButton && codeBlock) {
                                copyButton.addEventListener('click', () => {
                                        navigator.clipboard.writeText(codeBlock.textContent.trim()).then(() => {
                                                copyButton.textContent = '已复制!';
                                                setTimeout(() => {
                                                        copyButton.textContent = '复制';
                                                }, 2000);
                                        }).catch(err => {
                                                console.error('无法复制文本: ', err);
                                                showToast('复制失败', 'error');
                                        });
                                });
                        }
                });
                document.addEventListener('DOMContentLoaded', () => {
                        const toggleBtn = document.getElementById('toggle-all-btn');
                        const allDetails = document.querySelectorAll('main.main-content details');

                        if (toggleBtn && allDetails.length > 0) {
                                toggleBtn.addEventListener('click', () => {
                                        // 检查当前是否应执行“展开”操作
                                        // 我们通过检查第一个details元素是否关闭来判断整体状态
                                        const shouldOpen = !allDetails[0].hasAttribute('open');

                                        allDetails.forEach(detail => {
                                                detail.open = shouldOpen;
                                        });

                                        // 更新按钮文本以反映下一次点击的动作
                                        toggleBtn.textContent = shouldOpen ? '全部折叠' : '全部展开';
                                });
                        }
                });
        </script>
</body>

</html>